import{e as Kt,f as G,S as zt,D as Pe,r as p,j as v,g as He,h as Je,i as Gt,k as Y,l as Yt,A as qt,P as H,m as R,n as q,o as Xt,p as Qe,q as We,s as Zt,t as Jt,v as Qt,R as er,w as tr,F as rr,x as sr,C as or,y as nr,z as ze,B as ir,E as ar,V as lr,G as cr,H as X,I as et,J as ur,K as dr}from"./client-Be5q_lbq.js";import{L as fr}from"./loader-circle-E8mevhe3.js";import{L as tt,I as hr}from"./input-DPE8SgqL.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Kt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function be(s,n){return typeof s=="function"?s(n):s}function le(s,n){return Ue(n).reduce((e,r)=>{if(e===null)return null;if(typeof e<"u")return e[r]},s)}function fe(s,n,t){const e=Ue(n);function r(o){if(!e.length)return be(t,o);const i=e.shift();if(typeof i=="string"||typeof i=="number"&&!Array.isArray(o))return typeof o=="object"?(o===null&&(o={}),{...o,[i]:r(o[i])}):{[i]:r()};if(Array.isArray(o)&&typeof i=="number"){const a=o.slice(0,i);return[...a.length?a:new Array(i),r(o[i]),...o.slice(i+1)]}return[...new Array(i),r()]}return r(s)}function pr(s,n){const t=Ue(n);function e(r){if(!r)return;if(t.length===1){const i=t[0];if(Array.isArray(r)&&typeof i=="number")return r.filter((c,f)=>f!==i);const{[i]:a,...l}=r;return l}const o=t.shift();if(typeof o=="string"&&typeof r=="object")return{...r,[o]:e(r[o])};if(typeof o=="number"&&Array.isArray(r)){if(o>=r.length)return r;const i=r.slice(0,o);return[...i.length?i:new Array(o),e(r[o]),...r.slice(o+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return e(s)}const vr=/^(\d+)$/gm,gr=/\.(\d+)(?=\.)/gm,Sr=/^(\d+)\./gm,Mr=/\.(\d+$)/gm,yr=/\.{2,}/gm,Ne="__int__",he=`${Ne}$1`;function Ue(s){if(Array.isArray(s))return[...s];if(typeof s!="string")throw new Error("Path must be a string.");return s.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(vr,he).replace(gr,`.${he}.`).replace(Sr,`${he}.`).replace(Mr,`.${he}`).replace(yr,".").split(".").map(n=>n.indexOf(Ne)===0?parseInt(n.substring(Ne.length),10):n)}function br(s){return!(Array.isArray(s)&&s.length===0)}function Oe(s,n){const{asyncDebounceMs:t}=n,{onChangeAsync:e,onBlurAsync:r,onSubmitAsync:o,onBlurAsyncDebounceMs:i,onChangeAsyncDebounceMs:a}=n.validators||{},l=t??0,c={cause:"change",validate:e,debounceMs:a??l},f={cause:"blur",validate:r,debounceMs:i??l},d={cause:"submit",validate:o,debounceMs:0},u=S=>({...S,debounceMs:0});switch(s){case"submit":return[u(c),u(f),d];case"blur":return[f];case"change":return[c];case"server":default:return[]}}function je(s,n){const{onChange:t,onBlur:e,onSubmit:r,onMount:o}=n.validators||{},i={cause:"change",validate:t},a={cause:"blur",validate:e},l={cause:"submit",validate:r},c={cause:"mount",validate:o},f={cause:"server",validate:()=>{}};switch(s){case"mount":return[c];case"submit":return[i,a,l,f];case"server":return[f];case"blur":return[a,f];case"change":default:return[i,f]}}const Re=s=>!!s&&typeof s=="object"&&"fields"in s;function oe(s,n){if(Object.is(s,n))return!0;if(typeof s!="object"||s===null||typeof n!="object"||n===null)return!1;if(s instanceof Map&&n instanceof Map){if(s.size!==n.size)return!1;for(const[r,o]of s)if(!n.has(r)||!Object.is(o,n.get(r)))return!1;return!0}if(s instanceof Set&&n instanceof Set){if(s.size!==n.size)return!1;for(const r of s)if(!n.has(r))return!1;return!0}const t=Object.keys(s),e=Object.keys(n);if(t.length!==e.length)return!1;for(const r of t)if(!e.includes(r)||!oe(s[r],n[r]))return!1;return!0}const Ge=({newFormValidatorError:s,isPreviousErrorFromFormValidator:n,previousErrorValue:t})=>s?{newErrorValue:s,newSource:"form"}:n?{newErrorValue:void 0,newSource:void 0}:t?{newErrorValue:t,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},Ye=({formLevelError:s,fieldLevelError:n})=>n?{newErrorValue:n,newSource:"field"}:s?{newErrorValue:s,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function wr(s){const n=new Map;for(const t of s){const e=[...t.path??[]].map(r=>{const o=typeof r=="object"?r.key:r;return typeof o=="number"?`[${o}]`:o}).join(".").replace(/\.\[/g,"[");n.set(e,(n.get(e)??[]).concat(t))}return Object.fromEntries(n)}const qe=s=>{const n=wr(s);return{form:n,fields:n}},ne={validate({value:s,validationSource:n},t){const e=t["~standard"].validate(s);if(e instanceof Promise)throw new Error("async function passed to sync validator");if(e.issues)return n==="field"?e.issues:qe(e.issues)},async validateAsync({value:s,validationSource:n},t){const e=await t["~standard"].validate(s);if(e.issues)return n==="field"?e.issues:qe(e.issues)}},rt=s=>!!s&&"~standard"in s,Se={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function me(s){function n(d,u,S,m){const h=e(d,u,S,m);({insert:()=>a(h,d,u),remove:()=>l(h),swap:()=>m!==void 0&&f(h,d,u,m),move:()=>m!==void 0&&c(h,d,u,m)})[S]()}function t(d,u){return`${d}[${u}]`}function e(d,u,S,m){const h=[t(d,u)];if(S==="swap")h.push(t(d,m));else if(S==="move"){const[M,y]=[Math.min(u,m),Math.max(u,m)];for(let g=M;g<=y;g++)h.push(t(d,g))}else{const M=s.getFieldValue(d),y=Array.isArray(M)?M.length:0;for(let g=u+1;g<y;g++)h.push(t(d,g))}return Object.keys(s.fieldInfo).filter(M=>h.some(y=>M.startsWith(y)))}function r(d,u){return d.replace(/\[(\d+)\]/,(S,m)=>{const h=parseInt(m,10);return`[${u==="up"?h+1:Math.max(0,h-1)}]`})}function o(d,u){(u==="up"?d:[...d].reverse()).forEach(m=>{const h=r(m.toString(),u),M=s.getFieldMeta(h);M?s.setFieldMeta(m,M):s.setFieldMeta(m,i())})}const i=()=>Se,a=(d,u,S)=>{o(d,"down"),d.forEach(m=>{m.toString().startsWith(t(u,S))&&s.setFieldMeta(m,i())})},l=d=>{o(d,"up")},c=(d,u,S,m)=>{const h=new Map(Object.keys(s.fieldInfo).filter(M=>M.startsWith(t(u,S))).map(M=>[M,s.getFieldMeta(M)]));o(d,S<m?"up":"down"),Object.keys(s.fieldInfo).filter(M=>M.startsWith(t(u,m))).forEach(M=>{const y=M.replace(t(u,m),t(u,S)),g=h.get(y);g&&s.setFieldMeta(M,g)})},f=(d,u,S,m)=>{d.forEach(h=>{if(!h.toString().startsWith(t(u,S)))return;const M=h.toString().replace(t(u,S),t(u,m)),[y,g]=[s.getFieldMeta(h),s.getFieldMeta(M)];y&&s.setFieldMeta(M,y),g&&s.setFieldMeta(h,g)})};return{handleArrayFieldMetaShift:n}}function _e(s){return{values:s.values??{},errorMap:s.errorMap??{},fieldMetaBase:s.fieldMetaBase??{},isSubmitted:s.isSubmitted??!1,isSubmitting:s.isSubmitting??!1,isValidating:s.isValidating??!1,submissionAttempts:s.submissionAttempts??0,isSubmitSuccessful:s.isSubmitSuccessful??!1,validationMetaMap:s.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}class xr{constructor(n){var t;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{var e,r;const o=this.fieldMetaDerived.mount(),i=this.store.mount(),a=()=>{o(),i()};(r=(e=this.options.listeners)==null?void 0:e.onMount)==null||r.call(e,{formApi:this});const{onMount:l}=this.options.validators||{};return l&&this.validateSync("mount"),a},this.update=e=>{var r,o;if(!e)return;const i=this.options;this.options=e;const a=!!((o=(r=e.transform)==null?void 0:r.deps)!=null&&o.some((f,d)=>f!==this.prevTransformArray[d])),l=e.defaultValues&&!oe(e.defaultValues,i.defaultValues)&&!this.state.isTouched,c=!oe(e.defaultState,i.defaultState)&&!this.state.isTouched;!l&&!c&&!a||G(()=>{this.baseStore.setState(()=>_e(Object.assign({},this.state,c?e.defaultState:{},l?{values:e.defaultValues}:{},a?{_force_re_eval:!this.state._force_re_eval}:{})))})},this.reset=(e,r)=>{const{fieldMeta:o}=this.state,i=this.resetFieldMeta(o);e&&!r?.keepDefaultValues&&(this.options={...this.options,defaultValues:e}),this.baseStore.setState(()=>{var a;return _e({...this.options.defaultState,values:e??this.options.defaultValues??((a=this.options.defaultState)==null?void 0:a.values),fieldMetaBase:i})})},this.validateAllFields=async e=>{const r=[];return G(()=>{Object.values(this.fieldInfo).forEach(i=>{if(!i.instance)return;const a=i.instance;r.push(Promise.resolve().then(()=>a.validate(e,{skipFormValidation:!0}))),i.instance.state.meta.isTouched||i.instance.setMeta(l=>({...l,isTouched:!0}))})}),(await Promise.all(r)).flat()},this.validateArrayFieldsStartingFrom=async(e,r,o)=>{const i=this.getFieldValue(e),a=Array.isArray(i)?Math.max(i.length-1,0):null,l=[`${e}[${r}]`];for(let u=r+1;u<=(a??0);u++)l.push(`${e}[${u}]`);const c=Object.keys(this.fieldInfo).filter(u=>l.some(S=>u.startsWith(S))),f=[];return G(()=>{c.forEach(u=>{f.push(Promise.resolve().then(()=>this.validateField(u,o)))})}),(await Promise.all(f)).flat()},this.validateField=(e,r)=>{var o;const i=(o=this.fieldInfo[e])==null?void 0:o.instance;return i?(i.state.meta.isTouched||i.setMeta(a=>({...a,isTouched:!0})),i.validate(r)):[]},this.validateSync=e=>{const r=je(e,this.options);let o=!1;const i={};return G(()=>{var a,l;for(const f of r){if(!f.validate)continue;const d=this.runValidator({validate:f.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:u,fieldErrors:S}=ge(d),m=pe(f.cause);for(const h of Object.keys(this.state.fieldMeta)){const M=this.getFieldMeta(h);if(!M)continue;const{errorMap:y,errorSourceMap:g}=M,b=S?.[h],{newErrorValue:F,newSource:V}=Ge({newFormValidatorError:b,isPreviousErrorFromFormValidator:g?.[m]==="form",previousErrorValue:y?.[m]});V==="form"&&(i[h]={...i[h],[m]:b}),y?.[m]!==F&&this.setFieldMeta(h,A=>({...A,errorMap:{...A.errorMap,[m]:F},errorSourceMap:{...A.errorSourceMap,[m]:V}}))}((a=this.state.errorMap)==null?void 0:a[m])!==u&&this.baseStore.setState(h=>({...h,errorMap:{...h.errorMap,[m]:u}})),(u||S)&&(o=!0)}const c=pe("submit");(l=this.state.errorMap)!=null&&l[c]&&e!=="submit"&&!o&&this.baseStore.setState(f=>({...f,errorMap:{...f.errorMap,[c]:void 0}}))}),{hasErrored:o,fieldsErrorMap:i}},this.validateAsync=async e=>{const r=Oe(e,this.options);this.state.isFormValidating||this.baseStore.setState(c=>({...c,isFormValidating:!0}));const o=[];let i;for(const c of r){if(!c.validate)continue;const f=pe(c.cause),d=this.state.validationMetaMap[f];d?.lastAbortController.abort();const u=new AbortController;this.state.validationMetaMap[f]={lastAbortController:u},o.push(new Promise(async S=>{let m;try{m=await new Promise((g,b)=>{setTimeout(async()=>{if(u.signal.aborted)return g(void 0);try{g(await this.runValidator({validate:c.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:u.signal},type:"validateAsync"}))}catch(F){b(F)}},c.debounceMs)})}catch(g){m=g}const{formError:h,fieldErrors:M}=ge(m);M&&(i=i?{...i,...M}:M);const y=pe(c.cause);for(const g of Object.keys(this.state.fieldMeta)){const b=this.getFieldMeta(g);if(!b)continue;const{errorMap:F,errorSourceMap:V}=b,A=i?.[g],{newErrorValue:E,newSource:N}=Ge({newFormValidatorError:A,isPreviousErrorFromFormValidator:V?.[y]==="form",previousErrorValue:F?.[y]});F?.[y]!==E&&this.setFieldMeta(g,C=>({...C,errorMap:{...C.errorMap,[y]:E},errorSourceMap:{...C.errorSourceMap,[y]:N}}))}this.baseStore.setState(g=>({...g,errorMap:{...g.errorMap,[y]:h}})),S(i?{fieldErrors:i,errorMapKey:y}:void 0)}))}let a=[];const l={};if(o.length){a=await Promise.all(o);for(const c of a)if(c?.fieldErrors){const{errorMapKey:f}=c;for(const[d,u]of Object.entries(c.fieldErrors)){const m={...l[d]||{},[f]:u};l[d]=m}}}return this.baseStore.setState(c=>({...c,isFormValidating:!1})),l},this.validate=e=>{const{hasErrored:r,fieldsErrorMap:o}=this.validateSync(e);return r&&!this.options.asyncAlways?o:this.validateAsync(e)},this.getFieldValue=e=>le(this.state.values,e),this.getFieldMeta=e=>this.state.fieldMeta[e],this.getFieldInfo=e=>{var r;return(r=this.fieldInfo)[e]||(r[e]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(e,r)=>{this.baseStore.setState(o=>({...o,fieldMetaBase:{...o.fieldMetaBase,[e]:be(r,o.fieldMetaBase[e])}}))},this.resetFieldMeta=e=>Object.keys(e).reduce((r,o)=>{const i=o;return r[i]=Se,r},{}),this.setFieldValue=(e,r,o)=>{const i=o?.dontUpdateMeta??!1;G(()=>{i||this.setFieldMeta(e,a=>({...a,isTouched:!0,isDirty:!0,errorMap:{...a?.errorMap,onMount:void 0}})),this.baseStore.setState(a=>({...a,values:fe(a.values,e,r)}))})},this.deleteField=e=>{const o=[...Object.keys(this.fieldInfo).filter(i=>{const a=e.toString();return i!==a&&i.startsWith(a)}),e];this.baseStore.setState(i=>{const a={...i};return o.forEach(l=>{a.values=pr(a.values,l),delete this.fieldInfo[l],delete a.fieldMetaBase[l]}),a})},this.pushFieldValue=(e,r,o)=>{this.setFieldValue(e,i=>[...Array.isArray(i)?i:[],r],o),this.validateField(e,"change")},this.insertFieldValue=async(e,r,o,i)=>{this.setFieldValue(e,a=>[...a.slice(0,r),o,...a.slice(r)],i),await this.validateField(e,"change"),me(this).handleArrayFieldMetaShift(e,r,"insert"),await this.validateArrayFieldsStartingFrom(e,r,"change")},this.replaceFieldValue=async(e,r,o,i)=>{this.setFieldValue(e,a=>a.map((l,c)=>c===r?o:l),i),await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,r,"change")},this.removeFieldValue=async(e,r,o)=>{const i=this.getFieldValue(e),a=Array.isArray(i)?Math.max(i.length-1,0):null;if(this.setFieldValue(e,l=>l.filter((c,f)=>f!==r),o),me(this).handleArrayFieldMetaShift(e,r,"remove"),a!==null){const l=`${e}[${a}]`;this.deleteField(l)}await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,r,"change")},this.swapFieldValues=(e,r,o,i)=>{this.setFieldValue(e,a=>{const l=a[r],c=a[o];return fe(fe(a,`${r}`,c),`${o}`,l)},i),me(this).handleArrayFieldMetaShift(e,r,"swap",o),this.validateField(e,"change"),this.validateField(`${e}[${r}]`,"change"),this.validateField(`${e}[${o}]`,"change")},this.moveFieldValues=(e,r,o,i)=>{this.setFieldValue(e,a=>(a.splice(o,0,a.splice(r,1)[0]),a),i),me(this).handleArrayFieldMetaShift(e,r,"move",o),this.validateField(e,"change"),this.validateField(`${e}[${r}]`,"change"),this.validateField(`${e}[${o}]`,"change")},this.clearFieldValues=(e,r)=>{const o=this.getFieldValue(e),i=Array.isArray(o)?Math.max(o.length-1,0):null;if(this.setFieldValue(e,[],r),i!==null)for(let a=0;a<=i;a++){const l=`${e}[${a}]`;this.deleteField(l)}this.validateField(e,"change")},this.resetField=e=>{this.baseStore.setState(r=>({...r,fieldMetaBase:{...r.fieldMetaBase,[e]:Se},values:this.options.defaultValues?fe(r.values,e,le(this.options.defaultValues,e)):r.values}))},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((e,[r,o])=>(Object.keys(o).length&&o.errors.length&&(e[r]={errors:o.errors,errorMap:o.errorMap}),e),{})}),this.parseValuesWithSchema=e=>ne.validate({value:this.state.values,validationSource:"form"},e),this.parseValuesWithSchemaAsync=e=>ne.validateAsync({value:this.state.values,validationSource:"form"},e),this.baseStore=new zt(_e({...n?.defaultState,values:n?.defaultValues??((t=n?.defaultState)==null?void 0:t.values)})),this.fieldMetaDerived=new Pe({deps:[this.baseStore],fn:({prevDepVals:e,currDepVals:r,prevVal:o})=>{var i,a,l;const c=o,f=e?.[0],d=r[0];let u=0;const S={};for(const m of Object.keys(d.fieldMetaBase)){const h=d.fieldMetaBase[m],M=f?.fieldMetaBase[m],y=c?.[m],g=le(d.values,m);let b=y?.errors;if(!M||h.errorMap!==M.errorMap){b=Object.values(h.errorMap??{}).filter(N=>N!==void 0);const E=(i=this.getFieldInfo(m))==null?void 0:i.instance;E&&!E.options.disableErrorFlat&&(b=b?.flat(1))}const F=!br(b??[]),V=!h.isDirty,A=oe(g,le(this.options.defaultValues,m))||oe(g,(l=(a=this.getFieldInfo(m))==null?void 0:a.instance)==null?void 0:l.options.defaultValue);if(y&&y.isPristine===V&&y.isValid===F&&y.isDefaultValue===A&&y.errors===b&&h===M){S[m]=y,u++;continue}S[m]={...h,errors:b,isPristine:V,isValid:F,isDefaultValue:A}}return Object.keys(d.fieldMetaBase).length&&c&&u===Object.keys(d.fieldMetaBase).length?c:S}}),this.store=new Pe({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:e,currDepVals:r,prevVal:o})=>{var i,a,l,c;const f=o,d=e?.[0],u=r[0],S=r[1],m=Object.values(S).filter(Boolean),h=m.some(x=>x.isValidating),M=m.every(x=>x.isValid),y=m.some(x=>x.isTouched),g=m.some(x=>x.isBlurred),b=m.every(x=>x.isDefaultValue),F=y&&((i=u.errorMap)==null?void 0:i.onMount),V=m.some(x=>x.isDirty),A=!V,E=!!((a=u.errorMap)!=null&&a.onMount||m.some(x=>{var _;return(_=x?.errorMap)==null?void 0:_.onMount})),N=!!h;let C=f?.errors??[];(!d||u.errorMap!==d.errorMap)&&(C=Object.values(u.errorMap).reduce((x,_)=>_===void 0?x:_&&Re(_)?(x.push(_.form),x):(x.push(_),x),[]));const L=C.length===0,D=M&&L,W=this.options.canSubmitWhenInvalid??!1,U=u.submissionAttempts===0&&!y&&!E||!N&&!u.isSubmitting&&D||W;let k=u.errorMap;if(F&&(C=C.filter(x=>x!==u.errorMap.onMount),k=Object.assign(k,{onMount:void 0})),f&&d&&f.errorMap===k&&f.fieldMeta===this.fieldMetaDerived.state&&f.errors===C&&f.isFieldsValidating===h&&f.isFieldsValid===M&&f.isFormValid===L&&f.isValid===D&&f.canSubmit===U&&f.isTouched===y&&f.isBlurred===g&&f.isPristine===A&&f.isDefaultValue===b&&f.isDirty===V&&oe(d,u))return f;let B={...u,errorMap:k,fieldMeta:this.fieldMetaDerived.state,errors:C,isFieldsValidating:h,isFieldsValid:M,isFormValid:L,isValid:D,canSubmit:U,isTouched:y,isBlurred:g,isPristine:A,isDefaultValue:b,isDirty:V};const O=((l=this.options.transform)==null?void 0:l.deps)??[];if(O.length!==this.prevTransformArray.length||O.some((x,_)=>x!==this.prevTransformArray[_])){const x=Object.assign({},this,{state:B});(c=this.options.transform)==null||c.fn(x),B=x.state,this.prevTransformArray=O}return B}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(n||{})}get state(){return this.store.state}runValidator(n){return rt(n.validate)?ne[n.type](n.value,n.validate):n.validate(n.value)}async handleSubmit(n){var t,e,r,o,i,a,l,c;if(this.baseStore.setState(d=>({...d,isSubmitted:!1,submissionAttempts:d.submissionAttempts+1,isSubmitSuccessful:!1})),G(()=>{Object.values(this.fieldInfo).forEach(d=>{d.instance&&(d.instance.state.meta.isTouched||d.instance.setMeta(u=>({...u,isTouched:!0})))})}),!this.state.canSubmit)return;this.baseStore.setState(d=>({...d,isSubmitting:!0}));const f=()=>{this.baseStore.setState(d=>({...d,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){f(),(e=(t=this.options).onSubmitInvalid)==null||e.call(t,{value:this.state.values,formApi:this});return}if(await this.validate("submit"),!this.state.isValid){f(),(o=(r=this.options).onSubmitInvalid)==null||o.call(r,{value:this.state.values,formApi:this});return}G(()=>{Object.values(this.fieldInfo).forEach(d=>{var u,S,m;(m=(S=(u=d.instance)==null?void 0:u.options.listeners)==null?void 0:S.onSubmit)==null||m.call(S,{value:d.instance.state.value,fieldApi:d.instance})})}),(a=(i=this.options.listeners)==null?void 0:i.onSubmit)==null||a.call(i,{formApi:this});try{await((c=(l=this.options).onSubmit)==null?void 0:c.call(l,{value:this.state.values,formApi:this,meta:n??this.options.onSubmitMeta})),G(()=>{this.baseStore.setState(d=>({...d,isSubmitted:!0,isSubmitSuccessful:!0})),f()})}catch(d){throw this.baseStore.setState(u=>({...u,isSubmitSuccessful:!1})),f(),d}}setErrorMap(n){G(()=>{Object.entries(n).forEach(([t,e])=>{const r=t;if(Re(e)){const{formError:o,fieldErrors:i}=ge(e);for(const a of Object.keys(this.fieldInfo))this.getFieldMeta(a)&&this.setFieldMeta(a,c=>({...c,errorMap:{...c.errorMap,[r]:i?.[a]},errorSourceMap:{...c.errorSourceMap,[r]:"form"}}));this.baseStore.setState(a=>({...a,errorMap:{...a.errorMap,[r]:o}}))}else this.baseStore.setState(o=>({...o,errorMap:{...o.errorMap,[r]:e}}))})})}}function ge(s){if(s){if(Re(s)){const n=ge(s.form).formError,t=s.fields;return{formError:n,fieldErrors:t}}return{formError:s}}return{formError:void 0}}function pe(s){switch(s){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}class Cr{constructor(n){this.options={},this.mount=()=>{var t,e;const r=this.store.mount();this.options.defaultValue!==void 0&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const o=this.getInfo();o.instance=this,this.update(this.options);const{onMount:i}=this.options.validators||{};if(i){const a=this.runValidator({validate:i,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});a&&this.setMeta(l=>({...l,errorMap:{...l?.errorMap,onMount:a},errorSourceMap:{...l?.errorSourceMap,onMount:"field"}}))}return(e=(t=this.options.listeners)==null?void 0:t.onMount)==null||e.call(t,{value:this.state.value,fieldApi:this}),r},this.update=t=>{this.options=t;const e=this.name!==t.name;if(this.name=t.name,this.state.value===void 0){const r=le(t.form.options.defaultValues,t.name),o=t.defaultValue??r;e?this.setValue(i=>i||o,{dontUpdateMeta:!0}):o!==void 0&&this.setValue(o,{dontUpdateMeta:!0})}this.form.getFieldMeta(this.name)===void 0&&this.setMeta(this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(t,e)=>{this.form.setFieldValue(this.name,t,e),this.triggerOnChangeListener(),this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=t=>this.form.setFieldMeta(this.name,t),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(t,e)=>{this.form.pushFieldValue(this.name,t,e),this.triggerOnChangeListener()},this.insertValue=(t,e,r)=>{this.form.insertFieldValue(this.name,t,e,r),this.triggerOnChangeListener()},this.replaceValue=(t,e,r)=>{this.form.replaceFieldValue(this.name,t,e,r),this.triggerOnChangeListener()},this.removeValue=(t,e)=>{this.form.removeFieldValue(this.name,t,e),this.triggerOnChangeListener()},this.swapValues=(t,e,r)=>{this.form.swapFieldValues(this.name,t,e,r),this.triggerOnChangeListener()},this.moveValue=(t,e,r)=>{this.form.moveFieldValues(this.name,t,e,r),this.triggerOnChangeListener()},this.clearValues=t=>{this.form.clearFieldValues(this.name,t),this.triggerOnChangeListener()},this.getLinkedFields=t=>{const e=Object.values(this.form.fieldInfo),r=[];for(const o of e){if(!o.instance)continue;const{onChangeListenTo:i,onBlurListenTo:a}=o.instance.options.validators||{};t==="change"&&i?.includes(this.name)&&r.push(o.instance),t==="blur"&&a?.includes(this.name)&&r.push(o.instance)}return r},this.validateSync=(t,e)=>{var r;const o=je(t,this.options),a=this.getLinkedFields(t).reduce((f,d)=>{const u=je(t,d.options);return u.forEach(S=>{S.field=d}),f.concat(u)},[]);let l=!1;G(()=>{const f=(d,u)=>{var S;const m=ve(u.cause),h=u.validate?Xe(d.runValidator({validate:u.validate,value:{value:d.store.state.value,validationSource:"field",fieldApi:d},type:"validate"})):void 0,M=e[m],{newErrorValue:y,newSource:g}=Ye({formLevelError:M,fieldLevelError:h});((S=d.state.meta.errorMap)==null?void 0:S[m])!==y&&d.setMeta(b=>({...b,errorMap:{...b.errorMap,[m]:y},errorSourceMap:{...b.errorSourceMap,[m]:g}})),y&&(l=!0)};for(const d of o)f(this,d);for(const d of a)d.validate&&f(d.field,d)});const c=ve("submit");return(r=this.state.meta.errorMap)!=null&&r[c]&&t!=="submit"&&!l&&this.setMeta(f=>({...f,errorMap:{...f.errorMap,[c]:void 0},errorSourceMap:{...f.errorSourceMap,[c]:void 0}})),{hasErrored:l}},this.validateAsync=async(t,e)=>{const r=Oe(t,this.options),o=await e,i=this.getLinkedFields(t),a=i.reduce((u,S)=>{const m=Oe(t,S.options);return m.forEach(h=>{h.field=S}),u.concat(m)},[]);this.state.meta.isValidating||this.setMeta(u=>({...u,isValidating:!0}));for(const u of i)u.setMeta(S=>({...S,isValidating:!0}));const l=[],c=[],f=(u,S,m)=>{const h=ve(S.cause),M=u.getInfo().validationMetaMap[h];M?.lastAbortController.abort();const y=new AbortController;this.getInfo().validationMetaMap[h]={lastAbortController:y},m.push(new Promise(async g=>{var b;let F;try{F=await new Promise((C,L)=>{this.timeoutIds.validations[S.cause]&&clearTimeout(this.timeoutIds.validations[S.cause]),this.timeoutIds.validations[S.cause]=setTimeout(async()=>{if(y.signal.aborted)return C(void 0);try{C(await this.runValidator({validate:S.validate,value:{value:u.store.state.value,fieldApi:u,signal:y.signal,validationSource:"field"},type:"validateAsync"}))}catch(D){L(D)}},S.debounceMs)})}catch(C){F=C}if(y.signal.aborted)return g(void 0);const V=Xe(F),A=(b=o[this.name])==null?void 0:b[h],{newErrorValue:E,newSource:N}=Ye({formLevelError:A,fieldLevelError:V});u.setMeta(C=>({...C,errorMap:{...C?.errorMap,[h]:E},errorSourceMap:{...C.errorSourceMap,[h]:N}})),g(E)}))};for(const u of r)u.validate&&f(this,u,l);for(const u of a)u.validate&&f(u.field,u,c);let d=[];(l.length||c.length)&&(d=await Promise.all(l),await Promise.all(c)),this.setMeta(u=>({...u,isValidating:!1}));for(const u of i)u.setMeta(S=>({...S,isValidating:!1}));return d.filter(Boolean)},this.validate=(t,e)=>{var r;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:o}=e?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(t),{hasErrored:i}=this.validateSync(t,o[this.name]??{});if(i&&!this.options.asyncAlways)return(r=this.getInfo().validationMetaMap[ve(t)])==null||r.lastAbortController.abort(),this.state.meta.errors;const a=e?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(t);return this.validateAsync(t,a)},this.handleChange=t=>{this.setValue(t)},this.handleBlur=()=>{this.state.meta.isTouched||(this.setMeta(e=>({...e,isTouched:!0})),this.validate("change")),this.state.meta.isBlurred||this.setMeta(e=>({...e,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.parseValueWithSchema=t=>ne.validate({value:this.state.value,validationSource:"field"},t),this.parseValueWithSchemaAsync=t=>ne.validateAsync({value:this.state.value,validationSource:"field"},t),this.form=n.form,this.name=n.name,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new Pe({deps:[this.form.store],fn:()=>{const t=this.form.getFieldValue(this.name),e=this.form.getFieldMeta(this.name)??{...Se,...n.defaultMeta};return{value:t,meta:e}}}),this.options=n}get state(){return this.store.state}runValidator(n){return rt(n.validate)?ne[n.type](n.value,n.validate):n.validate(n.value)}setErrorMap(n){this.setMeta(t=>({...t,errorMap:{...t.errorMap,...n}}))}triggerOnBlurListener(){var n,t,e,r,o,i;const a=(n=this.form.options.listeners)==null?void 0:n.onBlurDebounceMs;a&&a>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{var c,f;(f=(c=this.form.options.listeners)==null?void 0:c.onBlur)==null||f.call(c,{formApi:this.form,fieldApi:this})},a)):(e=(t=this.form.options.listeners)==null?void 0:t.onBlur)==null||e.call(t,{formApi:this.form,fieldApi:this});const l=(r=this.options.listeners)==null?void 0:r.onBlurDebounceMs;l&&l>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{var c,f;(f=(c=this.options.listeners)==null?void 0:c.onBlur)==null||f.call(c,{value:this.state.value,fieldApi:this})},l)):(i=(o=this.options.listeners)==null?void 0:o.onBlur)==null||i.call(o,{value:this.state.value,fieldApi:this})}triggerOnChangeListener(){var n,t,e,r,o,i;const a=(n=this.form.options.listeners)==null?void 0:n.onChangeDebounceMs;a&&a>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{var c,f;(f=(c=this.form.options.listeners)==null?void 0:c.onChange)==null||f.call(c,{formApi:this.form,fieldApi:this})},a)):(e=(t=this.form.options.listeners)==null?void 0:t.onChange)==null||e.call(t,{formApi:this.form,fieldApi:this});const l=(r=this.options.listeners)==null?void 0:r.onChangeDebounceMs;l&&l>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{var c,f;(f=(c=this.options.listeners)==null?void 0:c.onChange)==null||f.call(c,{value:this.state.value,fieldApi:this})},l)):(i=(o=this.options.listeners)==null?void 0:o.onChange)==null||i.call(o,{value:this.state.value,fieldApi:this})}}function Xe(s){if(s)return s}function ve(s){switch(s){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}const Me=typeof window<"u"?p.useLayoutEffect:p.useEffect;function Fr(s){const[n]=p.useState(()=>{const e=new Cr({...s,form:s.form,name:s.name});return e.Field=st,e});return Me(n.mount,[n]),Me(()=>{n.update(s)}),He(n.store,s.mode==="array"?t=>[t.meta,Object.keys(t.value??[]).length]:void 0),n}const st=({children:s,...n})=>{const t=Fr(n),e=p.useMemo(()=>be(s,t),[s,t,t.state.value,t.state.meta]);return v.jsx(v.Fragment,{children:e})};function Vr({form:s,selector:n,children:t}){const e=He(s.store,n);return be(t,e)}function Er(s){const[n]=p.useState(()=>{const t=new xr(s),e=t;return e.Field=function(o){return v.jsx(st,{...o,form:t})},e.Subscribe=r=>v.jsx(Vr,{form:t,selector:r.selector,children:r.children}),e});return Me(n.mount,[]),He(n.store,t=>t.isSubmitting),Me(()=>{n.update(s)}),n}function Ir(){const s=p.createContext(null);function n(){const r=p.useContext(s);if(!r)throw new Error("`fieldContext` only works when within a `fieldComponent` passed to `createFormHook`");return r}const t=p.createContext(null);function e(){const r=p.useContext(t);if(!r)throw new Error("`formContext` only works when within a `formComponent` passed to `createFormHook`");return r}return{fieldContext:s,useFieldContext:n,useFormContext:e,formContext:t}}function Tr({fieldComponents:s,fieldContext:n,formContext:t,formComponents:e}){function r(i){const a=Er(i),l=p.useMemo(()=>({children:d})=>v.jsx(t.Provider,{value:a,children:d}),[a]),c=p.useMemo(()=>({children:d,...u})=>v.jsx(a.Field,{...u,children:S=>v.jsx(n.Provider,{value:S,children:d(Object.assign(S,s))})}),[a]);return p.useMemo(()=>Object.assign(a,{AppField:c,AppForm:l,...e}),[a,c,l])}function o({render:i,props:a}){return l=>i({...a,...l})}return{useAppForm:r,withForm:o}}function Ze(s,[n,t]){return Math.min(t,Math.max(n,s))}var Ar=[" ","Enter","ArrowUp","ArrowDown"],_r=[" ","Enter"],te="Select",[we,xe,Pr]=Yt(te),[ie,gs]=Gt(te,[Pr,Je]),Ce=Je(),[Nr,Z]=ie(te),[Or,jr]=ie(te),ot=s=>{const{__scopeSelect:n,children:t,open:e,defaultOpen:r,onOpenChange:o,value:i,defaultValue:a,onValueChange:l,dir:c,name:f,autoComplete:d,disabled:u,required:S,form:m}=s,h=Ce(n),[M,y]=p.useState(null),[g,b]=p.useState(null),[F,V]=p.useState(!1),A=nr(c),[E,N]=ze({prop:e,defaultProp:r??!1,onChange:o,caller:te}),[C,L]=ze({prop:i,defaultProp:a,onChange:l,caller:te}),D=p.useRef(null),W=M?m||!!M.closest("form"):!0,[U,k]=p.useState(new Set),B=Array.from(U).map(O=>O.props.value).join(";");return v.jsx(ir,{...h,children:v.jsxs(Nr,{required:S,scope:n,trigger:M,onTriggerChange:y,valueNode:g,onValueNodeChange:b,valueNodeHasChildren:F,onValueNodeHasChildrenChange:V,contentId:We(),value:C,onValueChange:L,open:E,onOpenChange:N,dir:A,triggerPointerDownPosRef:D,disabled:u,children:[v.jsx(we.Provider,{scope:n,children:v.jsx(Or,{scope:s.__scopeSelect,onNativeOptionAdd:p.useCallback(O=>{k(K=>new Set(K).add(O))},[]),onNativeOptionRemove:p.useCallback(O=>{k(K=>{const x=new Set(K);return x.delete(O),x})},[]),children:t})}),W?v.jsxs(It,{"aria-hidden":!0,required:S,tabIndex:-1,name:f,autoComplete:d,value:C,onChange:O=>L(O.target.value),disabled:u,form:m,children:[C===void 0?v.jsx("option",{value:""}):null,Array.from(U)]},B):null]})})};ot.displayName=te;var nt="SelectTrigger",it=p.forwardRef((s,n)=>{const{__scopeSelect:t,disabled:e=!1,...r}=s,o=Ce(t),i=Z(nt,t),a=i.disabled||e,l=Y(n,i.onTriggerChange),c=xe(t),f=p.useRef("touch"),[d,u,S]=At(h=>{const M=c().filter(b=>!b.disabled),y=M.find(b=>b.value===i.value),g=_t(M,h,y);g!==void 0&&i.onValueChange(g.value)}),m=h=>{a||(i.onOpenChange(!0),S()),h&&(i.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return v.jsx(qt,{asChild:!0,...o,children:v.jsx(H.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Tt(i.value)?"":void 0,...r,ref:l,onClick:R(r.onClick,h=>{h.currentTarget.focus(),f.current!=="mouse"&&m(h)}),onPointerDown:R(r.onPointerDown,h=>{f.current=h.pointerType;const M=h.target;M.hasPointerCapture(h.pointerId)&&M.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(m(h),h.preventDefault())}),onKeyDown:R(r.onKeyDown,h=>{const M=d.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&u(h.key),!(M&&h.key===" ")&&Ar.includes(h.key)&&(m(),h.preventDefault())})})})});it.displayName=nt;var at="SelectValue",lt=p.forwardRef((s,n)=>{const{__scopeSelect:t,className:e,style:r,children:o,placeholder:i="",...a}=s,l=Z(at,t),{onValueNodeHasChildrenChange:c}=l,f=o!==void 0,d=Y(n,l.onValueNodeChange);return q(()=>{c(f)},[c,f]),v.jsx(H.span,{...a,ref:d,style:{pointerEvents:"none"},children:Tt(l.value)?v.jsx(v.Fragment,{children:i}):o})});lt.displayName=at;var Rr="SelectIcon",ct=p.forwardRef((s,n)=>{const{__scopeSelect:t,children:e,...r}=s;return v.jsx(H.span,{"aria-hidden":!0,...r,ref:n,children:e||"▼"})});ct.displayName=Rr;var Dr="SelectPortal",ut=s=>v.jsx(Xt,{asChild:!0,...s});ut.displayName=Dr;var re="SelectContent",dt=p.forwardRef((s,n)=>{const t=Z(re,s.__scopeSelect),[e,r]=p.useState();if(q(()=>{r(new DocumentFragment)},[]),!t.open){const o=e;return o?Qe.createPortal(v.jsx(ft,{scope:s.__scopeSelect,children:v.jsx(we.Slot,{scope:s.__scopeSelect,children:v.jsx("div",{children:s.children})})}),o):null}return v.jsx(ht,{...s,ref:n})});dt.displayName=re;var z=10,[ft,J]=ie(re),kr="SelectContentImpl",Lr=tr("SelectContent.RemoveScroll"),ht=p.forwardRef((s,n)=>{const{__scopeSelect:t,position:e="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:o,onPointerDownOutside:i,side:a,sideOffset:l,align:c,alignOffset:f,arrowPadding:d,collisionBoundary:u,collisionPadding:S,sticky:m,hideWhenDetached:h,avoidCollisions:M,...y}=s,g=Z(re,t),[b,F]=p.useState(null),[V,A]=p.useState(null),E=Y(n,w=>F(w)),[N,C]=p.useState(null),[L,D]=p.useState(null),W=xe(t),[U,k]=p.useState(!1),B=p.useRef(!1);p.useEffect(()=>{if(b)return Jt(b)},[b]),Qt();const O=p.useCallback(w=>{const[P,...$]=W().map(j=>j.ref.current),[I]=$.slice(-1),T=document.activeElement;for(const j of w)if(j===T||(j?.scrollIntoView({block:"nearest"}),j===P&&V&&(V.scrollTop=0),j===I&&V&&(V.scrollTop=V.scrollHeight),j?.focus(),document.activeElement!==T))return},[W,V]),K=p.useCallback(()=>O([N,b]),[O,N,b]);p.useEffect(()=>{U&&K()},[U,K]);const{onOpenChange:x,triggerPointerDownPosRef:_}=g;p.useEffect(()=>{if(b){let w={x:0,y:0};const P=I=>{w={x:Math.abs(Math.round(I.pageX)-(_.current?.x??0)),y:Math.abs(Math.round(I.pageY)-(_.current?.y??0))}},$=I=>{w.x<=10&&w.y<=10?I.preventDefault():b.contains(I.target)||x(!1),document.removeEventListener("pointermove",P),_.current=null};return _.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",$,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",$,{capture:!0})}}},[b,x,_]),p.useEffect(()=>{const w=()=>x(!1);return window.addEventListener("blur",w),window.addEventListener("resize",w),()=>{window.removeEventListener("blur",w),window.removeEventListener("resize",w)}},[x]);const[Fe,ue]=At(w=>{const P=W().filter(T=>!T.disabled),$=P.find(T=>T.ref.current===document.activeElement),I=_t(P,w,$);I&&setTimeout(()=>I.ref.current.focus())}),Ve=p.useCallback((w,P,$)=>{const I=!B.current&&!$;(g.value!==void 0&&g.value===P||I)&&(C(w),I&&(B.current=!0))},[g.value]),Ee=p.useCallback(()=>b?.focus(),[b]),se=p.useCallback((w,P,$)=>{const I=!B.current&&!$;(g.value!==void 0&&g.value===P||I)&&D(w)},[g.value]),de=e==="popper"?De:mt,ae=de===De?{side:a,sideOffset:l,align:c,alignOffset:f,arrowPadding:d,collisionBoundary:u,collisionPadding:S,sticky:m,hideWhenDetached:h,avoidCollisions:M}:{};return v.jsx(ft,{scope:t,content:b,viewport:V,onViewportChange:A,itemRefCallback:Ve,selectedItem:N,onItemLeave:Ee,itemTextRefCallback:se,focusSelectedItem:K,selectedItemText:L,position:e,isPositioned:U,searchRef:Fe,children:v.jsx(er,{as:Lr,allowPinchZoom:!0,children:v.jsx(rr,{asChild:!0,trapped:g.open,onMountAutoFocus:w=>{w.preventDefault()},onUnmountAutoFocus:R(r,w=>{g.trigger?.focus({preventScroll:!0}),w.preventDefault()}),children:v.jsx(sr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:w=>w.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:v.jsx(de,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:w=>w.preventDefault(),...y,...ae,onPlaced:()=>k(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:R(y.onKeyDown,w=>{const P=w.ctrlKey||w.altKey||w.metaKey;if(w.key==="Tab"&&w.preventDefault(),!P&&w.key.length===1&&ue(w.key),["ArrowUp","ArrowDown","Home","End"].includes(w.key)){let I=W().filter(T=>!T.disabled).map(T=>T.ref.current);if(["ArrowUp","End"].includes(w.key)&&(I=I.slice().reverse()),["ArrowUp","ArrowDown"].includes(w.key)){const T=w.target,j=I.indexOf(T);I=I.slice(j+1)}setTimeout(()=>O(I)),w.preventDefault()}})})})})})})});ht.displayName=kr;var Br="SelectItemAlignedPosition",mt=p.forwardRef((s,n)=>{const{__scopeSelect:t,onPlaced:e,...r}=s,o=Z(re,t),i=J(re,t),[a,l]=p.useState(null),[c,f]=p.useState(null),d=Y(n,E=>f(E)),u=xe(t),S=p.useRef(!1),m=p.useRef(!0),{viewport:h,selectedItem:M,selectedItemText:y,focusSelectedItem:g}=i,b=p.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&c&&h&&M&&y){const E=o.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),C=o.valueNode.getBoundingClientRect(),L=y.getBoundingClientRect();if(o.dir!=="rtl"){const T=L.left-N.left,j=C.left-T,Q=E.left-j,ee=E.width+Q,Ie=Math.max(ee,N.width),Te=window.innerWidth-z,Ae=Ze(j,[z,Math.max(z,Te-Ie)]);a.style.minWidth=ee+"px",a.style.left=Ae+"px"}else{const T=N.right-L.right,j=window.innerWidth-C.right-T,Q=window.innerWidth-E.right-j,ee=E.width+Q,Ie=Math.max(ee,N.width),Te=window.innerWidth-z,Ae=Ze(j,[z,Math.max(z,Te-Ie)]);a.style.minWidth=ee+"px",a.style.right=Ae+"px"}const D=u(),W=window.innerHeight-z*2,U=h.scrollHeight,k=window.getComputedStyle(c),B=parseInt(k.borderTopWidth,10),O=parseInt(k.paddingTop,10),K=parseInt(k.borderBottomWidth,10),x=parseInt(k.paddingBottom,10),_=B+O+U+x+K,Fe=Math.min(M.offsetHeight*5,_),ue=window.getComputedStyle(h),Ve=parseInt(ue.paddingTop,10),Ee=parseInt(ue.paddingBottom,10),se=E.top+E.height/2-z,de=W-se,ae=M.offsetHeight/2,w=M.offsetTop+ae,P=B+O+w,$=_-P;if(P<=se){const T=D.length>0&&M===D[D.length-1].ref.current;a.style.bottom="0px";const j=c.clientHeight-h.offsetTop-h.offsetHeight,Q=Math.max(de,ae+(T?Ee:0)+j+K),ee=P+Q;a.style.height=ee+"px"}else{const T=D.length>0&&M===D[0].ref.current;a.style.top="0px";const Q=Math.max(se,B+h.offsetTop+(T?Ve:0)+ae)+$;a.style.height=Q+"px",h.scrollTop=P-se+h.offsetTop}a.style.margin=`${z}px 0`,a.style.minHeight=Fe+"px",a.style.maxHeight=W+"px",e?.(),requestAnimationFrame(()=>S.current=!0)}},[u,o.trigger,o.valueNode,a,c,h,M,y,o.dir,e]);q(()=>b(),[b]);const[F,V]=p.useState();q(()=>{c&&V(window.getComputedStyle(c).zIndex)},[c]);const A=p.useCallback(E=>{E&&m.current===!0&&(b(),g?.(),m.current=!1)},[b,g]);return v.jsx(Hr,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:S,onScrollButtonChange:A,children:v.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:F},children:v.jsx(H.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});mt.displayName=Br;var $r="SelectPopperPosition",De=p.forwardRef((s,n)=>{const{__scopeSelect:t,align:e="start",collisionPadding:r=z,...o}=s,i=Ce(t);return v.jsx(or,{...i,...o,ref:n,align:e,collisionPadding:r,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});De.displayName=$r;var[Hr,Ke]=ie(re,{}),ke="SelectViewport",pt=p.forwardRef((s,n)=>{const{__scopeSelect:t,nonce:e,...r}=s,o=J(ke,t),i=Ke(ke,t),a=Y(n,o.onViewportChange),l=p.useRef(0);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:e}),v.jsx(we.Slot,{scope:t,children:v.jsx(H.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:R(r.onScroll,c=>{const f=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:u}=i;if(u?.current&&d){const S=Math.abs(l.current-f.scrollTop);if(S>0){const m=window.innerHeight-z*2,h=parseFloat(d.style.minHeight),M=parseFloat(d.style.height),y=Math.max(h,M);if(y<m){const g=y+S,b=Math.min(m,g),F=g-b;d.style.height=b+"px",d.style.bottom==="0px"&&(f.scrollTop=F>0?F:0,d.style.justifyContent="flex-end")}}}l.current=f.scrollTop})})})]})});pt.displayName=ke;var vt="SelectGroup",[Wr,Ur]=ie(vt),Kr=p.forwardRef((s,n)=>{const{__scopeSelect:t,...e}=s,r=We();return v.jsx(Wr,{scope:t,id:r,children:v.jsx(H.div,{role:"group","aria-labelledby":r,...e,ref:n})})});Kr.displayName=vt;var gt="SelectLabel",St=p.forwardRef((s,n)=>{const{__scopeSelect:t,...e}=s,r=Ur(gt,t);return v.jsx(H.div,{id:r.id,...e,ref:n})});St.displayName=gt;var ye="SelectItem",[zr,Mt]=ie(ye),yt=p.forwardRef((s,n)=>{const{__scopeSelect:t,value:e,disabled:r=!1,textValue:o,...i}=s,a=Z(ye,t),l=J(ye,t),c=a.value===e,[f,d]=p.useState(o??""),[u,S]=p.useState(!1),m=Y(n,g=>l.itemRefCallback?.(g,e,r)),h=We(),M=p.useRef("touch"),y=()=>{r||(a.onValueChange(e),a.onOpenChange(!1))};if(e==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return v.jsx(zr,{scope:t,value:e,disabled:r,textId:h,isSelected:c,onItemTextChange:p.useCallback(g=>{d(b=>b||(g?.textContent??"").trim())},[]),children:v.jsx(we.ItemSlot,{scope:t,value:e,disabled:r,textValue:f,children:v.jsx(H.div,{role:"option","aria-labelledby":h,"data-highlighted":u?"":void 0,"aria-selected":c&&u,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...i,ref:m,onFocus:R(i.onFocus,()=>S(!0)),onBlur:R(i.onBlur,()=>S(!1)),onClick:R(i.onClick,()=>{M.current!=="mouse"&&y()}),onPointerUp:R(i.onPointerUp,()=>{M.current==="mouse"&&y()}),onPointerDown:R(i.onPointerDown,g=>{M.current=g.pointerType}),onPointerMove:R(i.onPointerMove,g=>{M.current=g.pointerType,r?l.onItemLeave?.():M.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:R(i.onPointerLeave,g=>{g.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:R(i.onKeyDown,g=>{l.searchRef?.current!==""&&g.key===" "||(_r.includes(g.key)&&y(),g.key===" "&&g.preventDefault())})})})})});yt.displayName=ye;var ce="SelectItemText",bt=p.forwardRef((s,n)=>{const{__scopeSelect:t,className:e,style:r,...o}=s,i=Z(ce,t),a=J(ce,t),l=Mt(ce,t),c=jr(ce,t),[f,d]=p.useState(null),u=Y(n,y=>d(y),l.onItemTextChange,y=>a.itemTextRefCallback?.(y,l.value,l.disabled)),S=f?.textContent,m=p.useMemo(()=>v.jsx("option",{value:l.value,disabled:l.disabled,children:S},l.value),[l.disabled,l.value,S]),{onNativeOptionAdd:h,onNativeOptionRemove:M}=c;return q(()=>(h(m),()=>M(m)),[h,M,m]),v.jsxs(v.Fragment,{children:[v.jsx(H.span,{id:l.textId,...o,ref:u}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Qe.createPortal(o.children,i.valueNode):null]})});bt.displayName=ce;var wt="SelectItemIndicator",xt=p.forwardRef((s,n)=>{const{__scopeSelect:t,...e}=s;return Mt(wt,t).isSelected?v.jsx(H.span,{"aria-hidden":!0,...e,ref:n}):null});xt.displayName=wt;var Le="SelectScrollUpButton",Ct=p.forwardRef((s,n)=>{const t=J(Le,s.__scopeSelect),e=Ke(Le,s.__scopeSelect),[r,o]=p.useState(!1),i=Y(n,e.onScrollButtonChange);return q(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;o(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),r?v.jsx(Vt,{...s,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Ct.displayName=Le;var Be="SelectScrollDownButton",Ft=p.forwardRef((s,n)=>{const t=J(Be,s.__scopeSelect),e=Ke(Be,s.__scopeSelect),[r,o]=p.useState(!1),i=Y(n,e.onScrollButtonChange);return q(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,f=Math.ceil(l.scrollTop)<c;o(f)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),r?v.jsx(Vt,{...s,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});Ft.displayName=Be;var Vt=p.forwardRef((s,n)=>{const{__scopeSelect:t,onAutoScroll:e,...r}=s,o=J("SelectScrollButton",t),i=p.useRef(null),a=xe(t),l=p.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),q(()=>{a().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),v.jsx(H.div,{"aria-hidden":!0,...r,ref:n,style:{flexShrink:0,...r.style},onPointerDown:R(r.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(e,50))}),onPointerMove:R(r.onPointerMove,()=>{o.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(e,50))}),onPointerLeave:R(r.onPointerLeave,()=>{l()})})}),Gr="SelectSeparator",Et=p.forwardRef((s,n)=>{const{__scopeSelect:t,...e}=s;return v.jsx(H.div,{"aria-hidden":!0,...e,ref:n})});Et.displayName=Gr;var $e="SelectArrow",Yr=p.forwardRef((s,n)=>{const{__scopeSelect:t,...e}=s,r=Ce(t),o=Z($e,t),i=J($e,t);return o.open&&i.position==="popper"?v.jsx(cr,{...r,...e,ref:n}):null});Yr.displayName=$e;var qr="SelectBubbleInput",It=p.forwardRef(({__scopeSelect:s,value:n,...t},e)=>{const r=p.useRef(null),o=Y(e,r),i=ar(n);return p.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==n&&f){const d=new Event("change",{bubbles:!0});f.call(a,n),a.dispatchEvent(d)}},[i,n]),v.jsx(H.select,{...t,style:{...lr,...t.style},ref:o,defaultValue:n})});It.displayName=qr;function Tt(s){return s===""||s===void 0}function At(s){const n=Zt(s),t=p.useRef(""),e=p.useRef(0),r=p.useCallback(i=>{const a=t.current+i;n(a),function l(c){t.current=c,window.clearTimeout(e.current),c!==""&&(e.current=window.setTimeout(()=>l(""),1e3))}(a)},[n]),o=p.useCallback(()=>{t.current="",window.clearTimeout(e.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(e.current),[]),[t,r,o]}function _t(s,n,t){const r=n.length>1&&Array.from(n).every(c=>c===n[0])?n[0]:n,o=t?s.indexOf(t):-1;let i=Xr(s,Math.max(o,0));r.length===1&&(i=i.filter(c=>c!==t));const l=i.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==t?l:void 0}function Xr(s,n){return s.map((t,e)=>s[(n+e)%s.length])}var Zr=ot,Pt=it,Jr=lt,Qr=ct,es=ut,Nt=dt,ts=pt,Ot=St,jt=yt,rs=bt,ss=xt,Rt=Ct,Dt=Ft,kt=Et;const os=Zr,ns=Jr,Lt=p.forwardRef(({className:s,children:n,...t},e)=>v.jsxs(Pt,{ref:e,className:X("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[n,v.jsx(Qr,{asChild:!0,children:v.jsx(et,{className:"h-4 w-4 opacity-50"})})]}));Lt.displayName=Pt.displayName;const Bt=p.forwardRef(({className:s,...n},t)=>v.jsx(Rt,{ref:t,className:X("flex cursor-default items-center justify-center py-1",s),...n,children:v.jsx(mr,{className:"h-4 w-4"})}));Bt.displayName=Rt.displayName;const $t=p.forwardRef(({className:s,...n},t)=>v.jsx(Dt,{ref:t,className:X("flex cursor-default items-center justify-center py-1",s),...n,children:v.jsx(et,{className:"h-4 w-4"})}));$t.displayName=Dt.displayName;const Ht=p.forwardRef(({className:s,children:n,position:t="popper",...e},r)=>v.jsx(es,{children:v.jsxs(Nt,{ref:r,className:X("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...e,children:[v.jsx(Bt,{}),v.jsx(ts,{className:X("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),v.jsx($t,{})]})}));Ht.displayName=Nt.displayName;const is=p.forwardRef(({className:s,...n},t)=>v.jsx(Ot,{ref:t,className:X("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n}));is.displayName=Ot.displayName;const Wt=p.forwardRef(({className:s,children:n,...t},e)=>v.jsxs(jt,{ref:e,className:X("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[v.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:v.jsx(ss,{children:v.jsx(ur,{className:"h-4 w-4"})})}),v.jsx(rs,{children:n})]}));Wt.displayName=jt.displayName;const as=p.forwardRef(({className:s,...n},t)=>v.jsx(kt,{ref:t,className:X("-mx-1 my-1 h-px bg-muted",s),...n}));as.displayName=kt.displayName;const ls=({label:s,options:n,required:t,type:e})=>{const r=Ut();return v.jsxs(tt,{htmlFor:r.name,children:[s,t?" *":"",v.jsxs(os,{value:r.state.value?.toString()??"",onValueChange:o=>{r.handleChange(e==="number"?Number(o):o)},children:[v.jsx(Lt,{children:v.jsx(ns,{placeholder:`Select a ${s}`})}),v.jsx(Ht,{children:n.map(o=>v.jsx(Wt,{value:`${o.value}`,children:o.label},o.value))})]})]})},cs=({label:s})=>{const n=hs();return v.jsx(n.Subscribe,{selector:t=>[t.isSubmitting,t.canSubmit],children:([t,e])=>v.jsxs(dr,{disabled:t||!e,type:"submit",children:[s,t&&v.jsx(fr,{className:"ml-2 h-4 w-4 animate-spin"})]})})},us=({label:s,type:n="text",required:t})=>{const e=Ut();return v.jsxs(tt,{htmlFor:e.name,children:[s,t?" *":"",v.jsx(hr,{name:e.name,id:e.name,value:e.state.value??"",onChange:r=>e.handleChange(r.target.value),type:n})]})},{fieldContext:ds,useFieldContext:Ut,formContext:fs,useFormContext:hs}=Ir(),{useAppForm:Ss}=Tr({fieldComponents:{TextField:us,SelectField:ls},formComponents:{SubmitButton:cs},fieldContext:ds,formContext:fs});export{Ss as u};
